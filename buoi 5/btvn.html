<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="container">
        <form id="profileForm">
            <h2>tao va chinh sua ho so</h2>
            <br>
            <label>Username</label>
            <input type="text" id="username">
            <br><br>
            <label>Email</label>
            <input type="email" id="email">
            <br><br>
            <label>Phone number</label>
            <input type="tel" id="phone">
            <br><br>
            <label>Address</label>
            <input type="text" id="address">
            <br><br>
            <label>Avatar</label>
            <input type="file" id="avatar" accept="image/*">
            <br><br>
            <button type="submit">Lưu hồ sơ</button>
        </form>

        <div class="profile-view">
            <h2>Ho so cua ban</h2>
            <p><strong>Anh dai dien:</strong></p>
            <img id="avatarPreview" src="" alt="Avatar">
            <p><strong>Username:</strong> <span id="viewUsername"></span></p>
            <p><strong>Email:</strong> <span id="viewEmail"></span></p>
            <p><strong>So dien thoai:</strong> <span id="viewPhone"></span></p>
            <p><strong>Dia chi:</strong> <span id="viewAddress"></span></p>
        </div>
    </div>

    <script>
        const form = document.getElementById("profileForm");

        const usernameInput = document.getElementById("username");
        const emailInput = document.getElementById("email");
        const phoneInput = document.getElementById("phone");
        const addressInput = document.getElementById("address");
        const avatarInput = document.getElementById("avatar");

        const viewUsername = document.getElementById("viewUsername");
        const viewEmail = document.getElementById("viewEmail");
        const viewPhone = document.getElementById("viewPhone");
        const viewAddress = document.getElementById("viewAddress");
        const avatarPreview = document.getElementById("avatarPreview");

        window.addEventListener("DOMContentLoaded", loadProfile);

        form.addEventListener("submit", function (e) {
            e.preventDefault();

            const reader = new FileReader();

            reader.onload = function () {
                const profile = {
                    username: usernameInput.value,
                    email: emailInput.value,
                    phone: phoneInput.value,
                    address: addressInput.value,
                    avatar: reader.result || avatarPreview.src
                };

                localStorage.setItem("profile", JSON.stringify(profile));
                displayProfile(profile);
                alert("da luu ho so");
            };

            if (avatarInput.files[0]) {
                reader.readAsDataURL(avatarInput.files[0]);
            } else {
                reader.onload();
            }
        });

        function loadProfile() {
            const data = localStorage.getItem("profile");
            if (!data) return;

            const profile = JSON.parse(data);

            usernameInput.value = profile.username;
            emailInput.value = profile.email;
            phoneInput.value = profile.phone;
            addressInput.value = profile.address;

            displayProfile(profile);
        }

        function displayProfile(profile) {
            viewUsername.textContent = profile.username;
            viewEmail.textContent = profile.email;
            viewPhone.textContent = profile.phone;
            viewAddress.textContent = profile.address;
            avatarPreview.src = profile.avatar || "";
        }

    </script>
</body>

</html>